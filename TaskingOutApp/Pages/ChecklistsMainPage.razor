@page "/checklists"

<MudContainer MaxWidth="MaxWidth.ExtraExtraLarge">
    @if (Index.userData.Checklists.Count == 0)
    {
        <MudContainer Style="top: 50%; left: 50%; transform: translate(-50%, -50%); position: fixed;">
            <MudStack AlignItems="AlignItems.Center">
                <MudText Typo="Typo.h5">You don't have any checlist created yet...</MudText>
                <MudButton Style="width: fit-content" Variant="Variant.Filled" Color="Color.Primary" Href="/checklists/create">Create Checklist</MudButton>
            </MudStack>
        </MudContainer>
    }
    else
    {
        @foreach (var checklist in Index.userData.Checklists)
        {
            <MudCard Class="mb-2">
                <MudButton FullWidth=true
                           Href=@($"/checklists/{Index.userData.Checklists.IndexOf(checklist)}")
                           Class="justify-space-between"
                           DisableRipple=true>
                    <MudCardContent Class="d-flex flex-column flex-grow-1">
                        <MudStack>
                            <MudStack Row=true Class="justify-space-between align-content-space-between">
                                <MudText>
                                    @checklist.Title
                                </MudText>
                                <MudText>
                                    @checklist.Checkeds / @checklist.Total
                                </MudText>
                            </MudStack>
                            <MudStack Row=true AlignItems="AlignItems.Center">
                                @if (!string.IsNullOrEmpty(checklist.Description))
                                {
                                    <MudText Style="width: calc(100% - 250px); position: absolute;" Class="overflow-x-scroll">
                                        @checklist.Description
                                    </MudText>
                                }
                                <MudSpacer />
                                <MudButton Color=Color.Primary
                                           Variant=Variant.Filled
                                           Style="width: 165px"
                                           StartIcon="@Icons.Material.Filled.Edit"
                                           Href=@($"/checklists/edit/{Index.userData.Checklists.IndexOf(checklist)}")>
                                    <MudText Inline=true>
                                        Edit Checklist
                                    </MudText>
                                </MudButton>
                            </MudStack>
                        </MudStack>
                    </MudCardContent>
                </MudButton>
                <MudCardActions Class="pa-0 ma-0">
                    <MudProgressLinear Color="Color.Tertiary" Size="Size.Small" Value=@checklist.Progress Rounded=true />
                </MudCardActions>
            </MudCard>
        }
        <MudFab Style="bottom: 15px; right: 15px; position: fixed;" Color="Color.Primary" StartIcon="@Icons.Material.Filled.Add" Href="/checklists/create" />
    }
</MudContainer>

@code {
}
